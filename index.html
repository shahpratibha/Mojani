<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Mojani</title>
        <link rel="icon" href="image/LOGO_DP_Zoning.png"
            type="image/x-icon">
        <link rel="stylesheet" type="text/css" href="css/index_new.css">
        <link rel="stylesheet" href="mainmodal/legend.css">
        <!-- bootstrap -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous">
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>

        <!-- fontawesome -->
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
            integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"
            integrity="sha512-GWzVrcGlo0TxTRvz9ttioyYJ+Wwk9Ck0G81D+eO63BaqHaJ3YZX9wuqjwgfcV/MrB2PhaVX9DkYVhbFpStnqpQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!-- leaflet -->
        <link rel="stylesheet"
            href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
            crossorigin />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin></script>
        <!-- leaflet-ajax -->
        <script
            src="https://unpkg.com/leaflet-ajax/dist/leaflet.ajax.min.js"></script>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
        <link rel="stylesheet" type="text/css" href="css/index_new.css">

    </head>

    <body>
        <div class="container">
            <div class="form-container">
                <a class="Geo" href="#"><img
                        src="image/LOGO_DP_Zoning.png" alt></a>
                <div class="toggle-switch">
                    <input type="checkbox" id="toggle" class="toggle-input">
                    <label for="toggle" class="toggle-label">
                        <span class="toggle-text toggle-text-left">State</span>
                        <span class="toggle-handle"></span>
                        <span
                            class="toggle-text toggle-text-right">Maharashtra</span>
                    </label>
                </div>

                <!-- Location input -->
                <div class="location-wrapper">
                    <div class="location-input-container">
                        <button class="location-button" onclick="toggleCard()">
                            <span> Select my location </span> <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <img src="./image/Pin_alt_fill.png" alt="Map Marker" class="location-icon" onclick="getLiveLocation()">
                    <div id="output"></div>
                </div>
                

                <!-- Card -->
                <div class="card" id="locationCard">
                    <div class="card-body">
                        <i class="fas fa-times cancel-icon" onclick="toggleCard()"></i>
                        <form method="post" action
                            enctype="multipart/form-data">
                            <div class="form-group mt-1">
                                <label for="input1"
                                    class="col-form-label">District</label>
                                <select class="form-control" name="input1"
                                    id="input1">
                                    <option>Ahmednagar</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="input2"
                                    class="col-form-label">Taluka</label>
                                <select class="form-control" name="input2"
                                    id="input2"></select>
                            </div>
                            <div class="form-group">
                                <label for="input3"
                                    class="col-form-label">Village</label>
                                <select class="form-control" name="input3"
                                    id="input3"></select>
                            </div>
                            <!-- <div class="form-group">
                            <label for="input4" class="col-form-label">Survey No</label>
                            <input type="text" class="form-control" name="input4" id="input4">
                        </div> -->
                        </form>
                    </div>
                </div>
            </div>

            <div class="map-container" id="mapContainer">
                <div id="map"></div>
                <div class="message-container">
                    <p>आमच्या मोजणी पोर्टलच्या सहाय्याने, तुम्हाला तुमच्या भाग
                        योजना सर्वेक्षणाची माहिती तसेच ई-नकाशा म्हणजे जमिनीच्या
                        नकाशाची माहिती मिळेल.</p>
                    <button class="btn" onclick="window.location.href='login.php';">Proceed</button>
                   
                </div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script
            src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
        <script src="js/index.js"></script>
        <script src="mainmodal/legend.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

        <script>
        function toggleCard() {
            var card = document.getElementById('locationCard');
            var mapContainer = document.getElementById('mapContainer');
            if (card.style.display === 'block') {
                card.style.display = 'none';
                mapContainer.classList.remove('reduced-height');
            } else {
                card.style.display = 'block';
                mapContainer.classList.add('reduced-height');
            }
        }

        function redirectToLogin() {
            window.location.href = 'login.php'; 
        }
    </script>

<script>
    function getLiveLocation() {
    const options = {
        enableHighAccuracy: true,
        timeout: 5000,
        maximumAge: 2000
    };

    navigator.geolocation.getCurrentPosition(success, error, options);
}

function success(pos) {
    const lat = pos.coords.latitude;
    const lng = pos.coords.longitude;
    const accuracy = pos.coords.accuracy;

    // Update map view
    map.setView([lat, lng], 15);

    // Add a marker to the map
    L.marker([lat, lng]).addTo(map)
        .bindPopup('You are here')
        .openPopup();

    // Display the live location information
    document.getElementById('output').innerText = `
        Latitude: ${lat}
        Longitude: ${lng}
        Accuracy: ${Math.round(accuracy)} meters
    `;

    // Adjust map container styles
    document.getElementById('mapContainer').classList.add('live-location');
}

function error(err) {
    if (err.code === 1) {
        alert("Please allow geolocation access");
    } else {
        alert("Cannot get current location");
    }
}

    </script>     
    </body>
</html>
